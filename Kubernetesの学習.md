# Kurbenetesの学習
## 概要
人に説明することになったときのために、事前にアウトプットしておく
なるべく一言で表現できるようにしておくと良い

## Kubernetesとは
- dockerコンテナのオーケストレーション
- コンテナオーケストレーションのデファクトスタンダード
- コンテナオーケストレーションとは、複数のコンテナをデプロイ・スケール・管理など、いろんなことをするシステム
- k8sはKubernetesの略語

## Kubernetesのいいところ
### Kubernetesは多くのことを自動化してくれている
dockerのスケールや冗長化やデプロイ自動化は大変で、以下ようなことを自動化してくれている

- 冗長化しないと
    - コンテナを載せるサーバを複数拠点用意して冗長化させないと
    - コンテナも冗長化させないと
    - 落ちたときのために稼働監視と、自動復旧させないと
- スケールしないと
    - 負荷が増えたら、スケールさせないと
    - スケールするなら、ロードバランスしないと
    - 各コンテナからログあるけど、このログはどこのコンテナか管理しないと
- コンテナの連携の管理しないと
    - 複数種類のコンテナの連携方法を管理しないと
    - コンテナが複数サーバに跨いだ時、ちゃんと連携するように管理しないと
- など

### GKEのやっていること
上記のように、GKEは多くのシステムの集大成のようなもので、
それがクラウドサービスという形で、いとも簡単に構築できようになっている
表面上は簡単に見えるが、裏ではかなり作り込まれており、多くのシステムで成り立っている


## Kurbenetes(GKE)で設定できるもの
### 登場人物
- クラスター: コンテナ管理の一番大きいくくり
    - ノード: dockerが動く環境(GCE)の管理
        - ノードプール: 複数zoneのノードまとまり
            - ノード: GCEインスタンス
- ServiceとIngress: podとそれに関連する一連の仕様
    - Ingress: L7ロードバランサで、HTTP(S)などのトラフィックのルールの集まり
    - Service: 監視、負荷分散、エンドポイントを含む一連の管理
        - pod: デプロイされたコンテナ

### KubernetesのServiceの種類
- LoadBalancer: L4のロードバランサー
- NodePort: Portを開いているノードを作成する。そのノードからサービスへフォーワードしてくれる
    - 1ポート1サービス
    - 開けれるポートは、30000–32767
    - Ingressを使う場合は、TypeはNodePortにする
- Ingress: L7のロードバランサー


## 文献
- [Kubernetesハンズオン](https://qiita.com/Kta-M/items/ce475c0063d3d3f36d5d)
- [Serviceを使用してフロントエンドをバックエンドに接続する
](https://kubernetes.io/ja/docs/tasks/access-application-cluster/connecting-frontend-backend/)
